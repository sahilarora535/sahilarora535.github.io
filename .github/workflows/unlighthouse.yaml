name: Run Unlighthouse

on:
  # Trigger the workflow every time you push to the `main` branch
  push:
    branches: [ main ]
  # Allows you to run this workflow manually from the Actions tab on GitHub.
  workflow_dispatch:

# Allow this job to clone the repo
permissions:
  contents: read

jobs:
  unlighthouse:
    runs-on: ubuntu-latest
    steps:
      - name: Install pnpm
        uses: pnpm/action-setup@v4
        with:
          version: latest
      - name: Install dependencies
        run: pnpm install -g @unlighthouse/cli puppeteer
      - name: Run Unlighthouse
        run: unlighthouse-ci --site https://sahilarora.in --budget 90 --build-static  --reporter jsonExpanded --no-cache --desktop --mobile --samples 5 --debug
